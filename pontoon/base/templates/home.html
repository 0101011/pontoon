{% extends "base.html" %}

{% block class %}home{% endblock %}

{% block content %}
<!-- Server data -->
<div id="server"
     class="hidden"
     {% if accept_language %}data-accept-language="{{ accept_language }}"{% endif %}
     {% if locale_code %}data-locale="{{ locale_code }}"{% endif %}
     {% if project_url %}data-url="{{ project_url }}"{% endif %}>
</div>

<!-- Frontpage -->
<section id="intro">
  <div class="inner">

    <a href="/"><h1 id="title">Pontoon</h1></a>

    <form>
      <!-- Project input/select -->
      <div class="project select">
        <input name="url" class="url" type="text" placeholder="{{ _('Type URL and press Enter') }}" autocomplete="off" />
        {% if projects|length > 0 %}
        <div class="button selector">
          <span class="handle">&#9662;</span>
        </div>
        <div class="menu">
          <div class="horizontal-separator"></div>
          <ul>
            {% for project in projects %}
            <li class="clearfix"><span class="project-name">{{ project.name }}</span><span class="project-url">{{ project.url }}</span></li>
            {% endfor %}
          </ul>
        </div>
        {% endif %}
      </div>

      <!-- Locale selector -->
      <div class="locale select">
        <div class="button confirm">
          <span class="language"></span>
        </div>
        <div class="button selector">
          <span class="handle">&#9662;</span>
        </div>
        <div class="menu">
          <div class="horizontal-separator"></div>
          <input type="text" class="search" autocomplete="off">
          <div class="horizontal-separator"></div>
          <ul>
            {% for locale in locales %}
            <li><span class="language {{ locale.code|lower }}">{{ locale.name }}<span class="code">{{ locale.code }}</span></span></li>
            {% endfor %}
            <li class="no-match">{{ _('No results match') }} "<span></span>"</li>
          </ul>
        </div>
      </div>
    </form>

    {% if error %}
    <p class="notification">{{ error }}</p>
    {% endif %}

    <nav>
      <ul class="links">
        <li><a id="demo" class="button" href="/locale/de/project/testpilot/" title="{{ _('Demo') }}">{{ _('Demo') }}</a></li>
        <li><a href="https://wiki.mozilla.org/L10n:Pontoon" target="_blank" title="{{ _('Learn') }}">Wiki</a></li>
        <li><a href="https://github.com/mathjazz/pontoon" target="_blank" title="{{ _('Hack') }}">GitHub</a></li>
        <li><a href="https://twitter.com/#!/mozillapontoon" target="_blank" title="{{ _('Follow') }}">Twitter</a></li>
        {% if perms.base.can_manage %}<li><a href="{{ url('pontoon.admin') }}" title="{{ _('Admin') }}">{{ _('Admin') }}</a></li>{% endif %}
        {% if user.is_authenticated() %}<li><a href="{{ url('signout') }}" title="{{ user.email }}">{{ _('Sign out') }}</a></li>{% endif %}
      </ul>
    </nav>

    <div id="install">
      <p>{{ _('To enable localization of your site with Pontoon, paste this code before the closing &lt;/head&gt; tag:') }}</p>
      <pre>
        <code>&lt;script src="{{ settings.SITE_URL }}/pontoon.js"&gt;&lt;/script&gt;</code>
      </pre>
    </div>

  </div>
</section>

<!-- Project loading indicator -->
{% include 'loader.html' %}

{% endblock %}
