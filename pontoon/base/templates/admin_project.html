{% extends "base.html" %}

{% block title %}{{ _('Pontoon &middot; %(subtitle)s')|format(subtitle=subtitle) }}{% endblock %}

{% block class %}admin-form{% endblock %}

{% block content %}
<section id="intro" class="visible">
  <form method="POST" action="{{ request.path }}" class="{{ subtitle.split(" ")[0].lower() }}">

    <h1 id="title">{{ _('%(subtitle)s')|format(subtitle=subtitle) }}</h1>
    <input type="hidden" value="{{ csrf_token }}" name="csrfmiddlewaretoken">
    {% if pk %}<input type="hidden" value="{{ pk }}" name="pk">{% endif %}

    <div>
        {{ form.name.label_tag() }}
        {{ form.name }}
        {{ form.name.errors }}
    </div>
    <div>
        {{ form.url.label_tag() }}
        {{ form.url }}
        {{ form.url.errors }}
    </div>
    <div>
        {{ form.locales.label_tag() }}
        {{ form.locales }}
        {{ form.locales.errors }}
    </div>

    <h2>Repositories</h2>

    <div class="svn clearfix">
        {{ form.svn.label_tag() }}
        {{ form.svn }}
        {% if subtitle.split(" ")[0].lower() == "edit" %}
        <button title="{{ _('Update all locales from SVN') }}" data-source="svn" class="button">
            <img class="update" src="{{ static('img/update.png') }}" alt="{{ _('Update all locales from SVN') }}" />
        </button>
        {% endif %}
        {{ form.svn.errors }}
    </div>
    <div class="transifex clearfix">
        {{ form.transifex_project.label_tag() }}
        {{ form.transifex_resource.label_tag() }}
        {{ form.transifex_project }}
        {{ form.transifex_resource }}
        {% if subtitle.split(" ")[0].lower() == "edit" %}
        <button title="{{ _('Update all locales from Transifex') }}" data-source="transifex" class="button">
            <img class="update" src="{{ static('img/update.png') }}" alt="{{ _('Update all locales from Transifex') }}" />
        </button>
        {% endif %}
        {{ form.transifex_project.errors }}
        {{ form.transifex_resource.errors }}
    </div>

    <h2>Subpages</h2>

    {{ formset.management_form }}
    {% for form in formset %}
        {{ form.id }}
    <div class="subpages clearfix">
        {{ form.name.label_tag() }}
        {{ form.url.label_tag() }}
        {{ form.name }}
        {{ form.url }}
        {{ form.name.errors }}
        {{ form.url.errors }}
    </div>
    {% endfor %}

    <h2>General info</h2>

    <div>
        {{ form.info_brief.label_tag() }}
        {{ form.info_brief }}
        {{ form.info_brief.errors }}
    </div>
    <div>
        {{ form.info_locales.label_tag() }}
        {{ form.info_locales }}
        {{ form.info_locales.errors }}
    </div>
    <div>
        {{ form.info_audience.label_tag() }}
        {{ form.info_audience }}
        {{ form.info_audience.errors }}
    </div>
    <div>
        {{ form.info_metrics.label_tag() }}
        {{ form.info_metrics }}
        {{ form.info_metrics.errors }}
    </div>

    <div class="controls">
        <button class="button">Save</button>
    </div>

  </form>
</section>
{% endblock %}
